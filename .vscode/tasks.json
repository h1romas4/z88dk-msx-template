{
  // See https://go.microsoft.com/fwlink/?LinkId=733558
  // for the documentation about the tasks.json format
  "version": "2.0.0",
  "tasks": [
    {
      "label": "Clean CMake directory",
      "type": "shell",
      "linux": {
        "command": "rm -Rf ${workspaceFolder}/build",
      },
    },
    {
      "label": "Run CMake (make)",
      "type": "shell",
      "dependsOn": "Clean CMake directory",
      "linux": {
        "command": "cmake -S . -B build",
      },
    },
    {
      "label": "Clean Build (make)",
      "type": "shell",
      "linux": {
        "command": "make --build build --target clean",
      },
    },
    {
      "label": "Run Build (make)",
      "type": "shell",
      "dependsOn": "Clean Build (make)",
      "linux": {
        "command": "cmake --build build",
      },
    },
    {
      "label": "Launch openMSX",
      "type": "shell",
      "linux": {
        "command": "openmsx ${workspaceFolder}/dist/example.rom",
      },
    },
    {
      "label": "Launch MAME",
      "type": "shell",
      "dependsOn": ["Deploy for MAME"],
      "linux": {
        "command": "(cd ${workspaceFolder}/mics/mame && ./mame cbiosm1jp example)",
      },
    },
    {
      "label": "Launch MAME with debugger",
      "type": "shell",
      "dependsOn": ["Deploy for MAME"],
      "linux": {
        "command": "(cd ${workspaceFolder}/mics/mame && ./mame cbiosm1jp example -debugger gdbstub -debug)",
      },
    },
    {
      "label": "Deploy for MAME",
      "type": "shell",
      "dependsOn": "Run Build (make)",
      "linux": {
        "command": "(cd dist/ && rm -f ${workspaceFolder}/mics/mame/roms/msx1_cart/example.zip && zip -j ${workspaceFolder}/mics/mame/roms/msx1_cart/example.zip example.rom)",
      },
    },
  ],
}
